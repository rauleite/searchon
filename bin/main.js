#!/usr/bin/env node
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";n.r(t),n.d(t,"lastArrayElement",(function(){return u})),n.d(t,"isArrayEmpty",(function(){return i})),n.d(t,"objectToList",(function(){return s})),n.d(t,"exitWithError",(function(){return p})),n.d(t,"listMatches",(function(){return f})),n.d(t,"setItemStore",(function(){return m})),n.d(t,"getItemStore",(function(){return d})),n.d(t,"setMachedAsDefault",(function(){return h})),n.d(t,"setPropertiesToDefaultFromListNames",(function(){return b})),n.d(t,"hasOption",(function(){return g})),n.d(t,"hasOptionsConflicts",(function(){return v})),n.d(t,"urlQuery",(function(){return k}));var r=n(3),o=n.n(r),a=n(10),c=n.n(a),u=function(e,t){return e&&e.length-1===t},i=function(e){return e&&e.length<=0},s=function(e){return Object.entries(e).map((function(e){var t=o()(e,2);t[0];return t[1]}))},p=function(e){console.error("Error:",e),process.exit(1)},f=function(e,t){return e.find((function(e){return e===t}))},l=function(e,t){var n=t?".":"";return"".concat(e).concat(n).concat(t)},m=function(e){var t=e.itemName,n=e.property,r=void 0===n?"":n,o=e.value,a=e.conf,c=l(t,r);a.set(c,o)},d=function(e){var t=e.itemName,n=e.property,r=void 0===n?"":n,o=e.conf,a=l(t,r);o.get(a)},h=function(e){var t=e.list,n=e.obj,r=e.properties,o=function(e){return function(e){var t=e.value,n=e.obj,r=e.properties,o=n;return r.forEach((function(e){o[e]=t})),o}({value:e,obj:n,properties:r})};return f(t,n.name)?o(!0):o(!1)},b=function(e){var t=e.listName,n=e.objStore,r=e.properties,a=void 0===r?["default"]:r,c={};return Object.entries(n).forEach((function(e){var n=o()(e,2),r=n[0],u=n[1];c[r]=h({list:t,obj:u,properties:a})})),c},g=function(e){return!!e},v=function(e){var t=Object.keys(e),n=[];return{hasConflicts:[["defaults","group"]].some((function(e){return n=[],e.every((function(e){var r=t.find((function(t){return e===t}));return n.push(r),!!r}))})),optionsConflicts:n}},k=function(e,t){return c.a.escape("".concat(e," ").concat(t))}},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t,n){"use strict";n.r(t),n.d(t,"conf",(function(){return i})),n.d(t,"groupsStore",(function(){return p})),n.d(t,"sitesStore",(function(){return f})),n.d(t,"configsStore",(function(){return l}));var r=n(9),o={stackoverflow:{name:"Stack Overflow",url:"https://stackoverflow.com/questions/",checked:!0,default:!0,groups:["communities"]},stackexchange:{name:"Stackexchange",url:"https://www.stackexchange.com",checked:!0,default:!0,groups:["communities"]},reddit:{name:"Reddit",url:"https://www.reddit.com/",checked:!0,default:!0,groups:["communities"]},quora:{name:"Quora",url:"https://www.quora.com/",checked:!0,default:!0,groups:["communities"]},devto:{name:"Dev.to – Community",url:"https://dev.to",checked:!1,default:!1,groups:["communities","sites","blog"]},hackernews:{name:"Hacker News",url:"https://news.ycombinator.com/",checked:!1,default:!1,groups:["communities"]},hackernoon:{name:"Hackernoon",url:"https://hackernoon.com",checked:!1,default:!1,groups:["communities"]},freecodecamp:{name:"freeCodeCamp",url:"https://www.freecodecamp.org/forum/",checked:!1,default:!1,groups:["communities"]},sitepoint:{name:"Site Point – Community",url:"https://www.sitepoint.com/",checked:!1,default:!1,groups:["sites"]},spectrum:{name:"Spectrum",url:"https://www.spectrum.chat/",checked:!1,default:!1,groups:["communities"]},codeproject:{name:"CodeProject",url:"https://www.codeproject.com/",checked:!1,default:!1,groups:["communities"]}},a={sites:{name:"sites",default:!1,checked:!1},communities:{name:"communities",default:!0,checked:!0},blog:{name:"blog",default:!1,checked:!1}},c={defaultGroups:["communities"],urlBase:"https://www.google.com/search?q=",terms:"intext:($)",inurl:'inurl:"$"'},u=["### BACKUP ### BACKUP ### BACKUP ###","PLease, BACKUP this file.","If you know what you're doing, you can create groups and sites","----------------------------------------","CACHE FILES – INSTRUCTIONS","----------------------------------------","The new literal object must have all properties.","The default types vary.","Please look at the properties below as an example."],i=new(n.n(r).a)({defaults:{instructions:u,configs:c,groups:a,sites:o}}),s=i.store,p=s.groups,f=s.sites,l=s.configs},function(e,t){e.exports=require("inquirer")},function(e,t){e.exports=require("commander")},function(e){e.exports=JSON.parse('{"name":"searchon","version":"1.0.1","author":{"name":"Raul Abreu Leite","email":"raul.abreu.leite@gmail.com"},"repository":{"type":"git","url":"https://github.com/rauleite/searchon.git"},"bugs":{"url":"https://github.com/rauleite/searchon/issues"},"homepage":"https://github.com/rauleite/searchon#readme","description":"CLI for developer friendly Discussions Search (Mac, Linux, Windows)","keywords":["Google","Search","CLI"],"license":"MIT","main":"./bin/main.js","bin":{"searchon":"./bin/main.js"},"sideEffects":false,"scripts":{"dev":"yarn build --watch","pkg":"pkg . --out-path ../searchon-bin/ && cp -r node_modules/open/xdg-open ../searchon-bin/xdg-open && ls -lha ../searchon-bin/xdg-open","start":"node ./.bin/main.js","build":"cross-env NODE_OPTIONS=--max_old_space_size=2048 webpack --display-optimization-bailout","build:prod":"webpack --config=webpack.prod.js"},"dependencies":{"commander":"^6.0.0","conf":"^7.1.2","inquirer":"^7.3.3","open":"^7.1.0"},"devDependencies":{"@babel/core":"^7.11.1","@babel/plugin-transform-runtime":"^7.11.0","@babel/preset-env":"^7.11.0","babel-loader":"^8.1.0","clean-webpack-plugin":"^3.0.0","cross-env":"^7.0.2","eslint":"7.2.0","eslint-config-airbnb":"^18.2.0","eslint-config-airbnb-base":"14.2.0","eslint-plugin-import":"^2.21.2","pkg":"^4.4.9","webpack":"^4.44.1","webpack-cli":"^3.3.12","webpack-merge":"^5.1.1","webpack-node-externals":"^2.5.1"}}')},function(e,t){e.exports=require("open")},function(e,t){e.exports=require("conf")},function(e,t){e.exports=require("querystring")},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(2),c=n.n(a),u=n(8),i=n.n(u),s=n(6),p=n(5),f=n.n(p),l=n(3),m=n.n(l),d=n(4),h=n(0),b=n(4),g=b.sitesStore,v=b.conf,k=n(0),y=k.objectToList,w=k.setPropertiesToDefaultFromListNames,x=k.setItemStore,j=Object.entries(g).map((function(e){var t=m()(e,2);t[0];return t[1].name})),O=Object.entries(g),S=y(g),T=function(e){var t,n,r,o;t={value:w({listName:e,objStore:g,properties:["default","checked"]})},n=t.property,r=void 0===n?"":n,o=t.value,x({itemName:"sites",property:r,value:o,conf:v})},E=function(e){return S.filter((function(t){return e.some((function(e){return t.groups.includes(e)}))}))},C={TERMS:"",GROUP:""},N=d.configsStore,P=function(){return d.conf.path},A=function(e){C.TERMS=e},q=function(e){var t;return(t=e,O.filter((function(e){var n=m()(e,2),r=(n[0],n[1]);return t.some((function(e){return e===r.name}))}))).map((function(e){var t=m()(e,2),n=(t[0],t[1]);return N.inurl.replace("$",n.url)})).join(" OR ")},I=function(e){var t,n,r,o;n=(t={value:e,property:"defaultTerms"}).property,r=void 0===n?"":n,o=t.value,Object(h.setItemStore)({itemName:"configs",property:r,value:o,conf:d.conf})},L=function(){return C.TERMS},_=function(){return N.defaultTerms},M=function(e){return e.length<3},D=function(){var e=c()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.prompt([{type:"input",message:"Type the search terms",name:"inputTerms",default:function(){return _()},validate:function(e){return!M(e)||"The term must having at least three strings."}}]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Object.keys(d.groupsStore),U=Object(h.objectToList)(d.groupsStore),$=function(e){var t,n,r,o,a=Object(h.setPropertiesToDefaultFromListNames)({listName:e,objStore:d.groupsStore,properties:["default","checked"]});n=(t={value:a}).property,r=void 0===n?"":n,o=t.value,Object(h.setItemStore)({itemName:"groups",property:r,value:o,conf:d.conf})},G=function(e){(function(e){return R.some((function(t){return e.some((function(e){return t===e}))}))})(e)||Object(h.exitWithError)("Oops, please insert a valid group: ".concat(R,"."))},W=function(e){G(e)},B=function(){var e=c()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.prompt([{type:"checkbox",message:"Select groups to search",name:"groupsName",choices:U,validate:function(e){return!(e.length<1)||"You must choose at least one site."}}]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=c()(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(t),e.abrupt("return",f.a.prompt([{type:"checkbox",message:"Select sites to search",name:"sitesName",choices:E(t),validate:function(e){return!(e.length<1)||"You must choose at least one site."}}]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=c()(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],r=!1,!Object(h.hasOption)(t.group)){e.next=7;break}n=t.group,r=!0,e.next=15;break;case 7:if(!Object(h.hasOption)(t.defaults)){e.next=11;break}n=R,e.next=15;break;case 11:return e.next=13,B();case 13:n=e.sent.groupsName,r=!0;case 15:return r&&$(n),e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=c()(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!Object(h.hasOption)(t.defaults)){e.next=5;break}r=j,e.next=8;break;case 5:return e.next=7,V(n);case 7:r=e.sent.sitesName;case 8:return T(r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=c()(o.a.mark((function e(t){var n,r,a,c,u,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(h.hasOptionsConflicts)(t),r=n.hasConflicts,a=n.optionsConflicts,!r){e.next=4;break}return Object(h.exitWithError)("You cannot use those two options combined: ".concat(a.join(", "))),e.abrupt("return");case 4:if(c=L()){e.next=9;break}return e.next=8,D();case 8:c=e.sent.inputTerms;case 9:if(!M(c)){e.next=12;break}return Object(h.exitWithError)("The term must having at least three strings."),e.abrupt("return");case 12:return A(c),I(c),e.next=16,F(t);case 16:return u=e.sent,e.next=19,H(t,u);case 19:return i=e.sent,e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=n(7),Q=function(e){var t,n;return n=",",(t=e).includes(n)?t.split(n):[t]},Y=function(e){var t=e.value,n=e.previous,r=e.types,o=e.callback;if(Object(h.isArrayEmpty)(r))return t;var a=t;return r.forEach((function(e,t){a=e(a,n),Object(h.lastArrayElement)(r,t)&&o&&o(a)})),a},J={GROUP:{flag1:"-g",flag2:"--group <group1,group2>",option:"group",comments:"Avaible: ".concat(R),custom:function(e,t){return Y({value:e,previous:t,types:[Q],callback:function(e){}})},initValue:void 0},DEFAULT:{flag1:"-d",flag2:"--defaults",option:"defaults",comments:"search on all defaults groups and sites",custom:void 0,initValue:void 0},EDIT_CACHE:{flag1:"",flag2:"--edit-cache",option:"edit-cache",comments:"Open and edit cache file",custom:void 0,initValue:void 0},PATH:{flag1:"",flag2:"--cache-path",option:"path",comments:"shows the cache path",custom:void 0,initValue:void 0},CLEAN:{flag1:"",flag2:"--clean",option:"clean",comments:"clean the cache file",custom:void 0,initValue:void 0}},X=function(e){return new f.a.Separator(e).line};Object.entries(J).forEach((function(e){var t=m()(e,2),n=(t[0],t[1]),r=n.flag1&&n.flag2?", ":"";s.program.option("".concat(n.flag1).concat(r).concat(n.flag2),n.comments,n.custom,n.initValue)})),s.program.version(z.version,"-v, --version","current version").name(z.name).usage(X('[--options param1[,param2]] ["search terms"]')).description(X("  ".concat(z.description))).arguments("[terms] [oneArg]").action((function(e,t){t&&Object(h.exitWithError)('There must be only one search term. Try to surround it with quotes: "'.concat(e," ").concat(t,'"')),e&&(A(e),I(e))})).on("--help",(function(){console.info(""),console.info("Examples:"),console.info("Search wizard:"),console.info(X("  $ ".concat(z.name))),console.info("Search based on the multiple groups:"),console.info(X("  $ ".concat(z.name,' -g myGroup,otherGroup "deno vs nodejs"'))),console.info("Tip: If you know what you're doing, you can create groups and sites by editing the cache file. (Warning: risk of corrupting it)"),console.info(X("  $ ".concat(z.name," --cache-path"))),console.info(X("  $ ".concat(z.name," --edit-cache")))})).parse(process.argv),function(){var e=c()(o.a.mark((function e(){var t,n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.program.editCache){e.next=6;break}return t=P(),console.info(t),e.next=5,i()(t);case 5:return e.abrupt("return");case 6:if(!s.program.cachePath){e.next=9;break}return console.info(P()),e.abrupt("return");case 9:if(!s.program.clean){e.next=13;break}return d.conf.clear(),console.info("Ok"),e.abrupt("return");case 13:return e.next=15,K(s.program);case 15:return n=e.sent,r=N.urlBase,a=Object(h.urlQuery)((o=L()||_(),N.terms.replace("$",o)),q(n)),e.next=20,i()(r+a);case 20:case"end":return e.stop()}var o}),e)})));return function(){return e.apply(this,arguments)}}()()}]);